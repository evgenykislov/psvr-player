# psvr-player
Проигрыватель 3D фильмов для гарнитуры PS VR, подключенной к компьютеру.

Отличия проигрывателя:  
- компенсация позиции vr шлема;  
- настройка межзрачкового расстояния;  
- коррекция геометрических и цветовых искажений, цветового формата, порядка потоков;  
- поддержка 180-гр. side-by-side (sbs) формата 3D фильмов;  
- минималистичный интерфейс.  
  
Поддерживаемые ОС: Linux, Windows.  
  
## Сборка под Linux  
  
Сборка под Linux производится из исходного кода и требует установки дополнительных библиотек для работы с оборудованием vr шлема, графическим ускорением и др.  
Команды для установки приведены для ОС Debian, для других ОС используйте соответствующий пакетный менеджер.  
Последовательность сборки:  
1. Установите компилятор и программы для сборки: git, cmake, g++, xxd  
**sudo apt install git cmake g++ xxd**  
2. Установите библиотеки для сборки: libvlccore-dev, libvlc-dev, libhidapi-dev, libglfw3-dev, libglm-dev:  
**sudo apt install libvlccore-dev libvlc-dev libhidapi-dev libglfw3-dev libglm-dev**  
3. Загрузите код из github или gitflic. В домашней директории запустите команду:  
**git clone https://github.com/evgenykislov/psvr-player.git -b main**  
4. Соберите psvr-player и установите его:  
**cd psvr-player**  
**cmake -B build**  
**cmake --build build**  
**sudo cmake --install build**  
  
## Сборка под Windows  
См. файл misc/windows_build_rus.md.  
  
## Подключение vr шлема
PSVR шлем подключается через штатный VR processor. Разъёмы HDMI и USB, вместо подключения к Playstation, подключаются к компьютеру.  
Для работы оборудования под обычными правами скопируйте файл **99-psvr.rules** в директорию **/etc/udev/rules.d** и перегрузите компьютер.  
  
## Подготовка проигрывателя psvrplayer  
Для правильного использования проигрывателя необходимо предварительно сделать следующее:
1. Выбрать устройства vr шлема  
Запустите команду:
**psvrplayer --selectdevices**  
и выберите устройства контроля и сенсоров из предложенного списка.  
2. Откалибровать vr шлем  
Положите vr шлем на устойчивую горизонтальную поверхность.  
Запустите команду:  
**psvrplayer --calibration**  
и следуйте указаниям программы  
3. Выбор vr экрана  
Запустите команду при подключенном и включенном vr шлеме:  
**psvrplayer --listscreens**  
программа выведет список экранов, выберите соответствующий vr шлему и запомните позицию экрана, например: **1920x0**  
  
## Проигрывание 3D фильмов  
Запустите команду:  
**psvrplayer --screen=1920x0 --play==filename**  
где:  
1920x0 - позиция экрана, подставьте своё значение, полученное при выборе экрана (см. раздел подготовка)  
filename - имя файла с фильмом  
  
### Управление воспроизведением  
Управление воспроизведением осуществляется с клавиатуры:  
Esc - завершение просмотра  
Space - пауза/воспроизведение  
Left Ctrl - центрирование вида  
Left Arrow - перемотка назад: обычная, быстрая (двойное нажатие), очень быстрая (тройное нажатие)  
Right Arrow - перемотка вперед: обычная, быстрая (двойное нажатие), очень быстрая (тройное нажатие)  
  
### Дополнительно  
Для получения информации по опциям командной строки запустите команду:  
**psvrplayer --help**  
Более подробная информация размещена на сайте [apoheliy.com/psvrplayer](https://apoheliy.com/psvrplayer/)  
  
## Автор  
  
**Евгений Кислов** - [evgenykislov.com](https://evgenykislov.com), [github/evgenykislov](https://github.com/evgenykislov)  
  
## Лицензия  
  
Проект лицензирован под GPL. Подробнее см. файл [LICENSE](LICENSE)  
  